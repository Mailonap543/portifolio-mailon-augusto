<!-- Loading State -->
<div class="loading-screen" *ngIf="isLoading">
  <div class="loading-content">
    <div class="loading-logo">SYSTEM.MAILON</div>
    <div class="loading-bar">
      <div class="loading-progress"></div>
    </div>
    <div class="loading-text">INICIALIZANDO SISTEMA...</div>
  </div>
</div>

<!-- Main App -->
<div class="system-bg" *ngIf="!isLoading">

  <!-- Navbar -->
  <nav class="system-nav" [class.scrolled]="scrolled">
    <div class="container">
      <div class="nav-inner">
        <a class="navbar-brand" (click)="scrollToSection('home')">
          <span class="brand-bracket">[</span>SYSTEM.MAILON<span class="brand-bracket">]</span>
        </a>

        <div class="nav-links" [class.open]="navbarOpen">
          <a class="nav-link" [class.active]="activeSection === 'home'" (click)="scrollToSection('home')">HOME</a>
          <a class="nav-link" [class.active]="activeSection === 'sobre'" (click)="scrollToSection('sobre')">SOBRE</a>
          <a class="nav-link" [class.active]="activeSection === 'skills'" (click)="scrollToSection('skills')">SKILLS</a>
          <a class="nav-link" [class.active]="activeSection === 'projetos'" (click)="scrollToSection('projetos')">PROJETOS</a>
          <a class="nav-link" [class.active]="activeSection === 'contato'" (click)="scrollToSection('contato')">CONTATO</a>
        </div>

        <div class="nav-actions">
          <button class="btn-contact-red" (click)="abrirContato()" aria-label="Entrar em contato">
            <i class="bi bi-chat-dots-fill"></i> CONTACT ME
          </button>
          <button class="hamburger" (click)="toggleNavbar()" [class.active]="navbarOpen" aria-label="Menu de navegação">
            <span></span><span></span><span></span>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section id="home" class="hero-section">
    <div class="container">
      <div class="row align-items-center min-vh-100">
        <div class="col-lg-7 hero-content animate-on-scroll fade-up">
          <div class="hero-badge">
            <span class="badge-dot"></span> DISPONÍVEL PARA PROJETOS
          </div>
          <h1 class="glitch-text" data-text="MAILON AUGUSTO">MAILON AUGUSTO</h1>
          <p class="hero-subtext">{{ portfolioData?.bio || 'Desenvolvedor Full Stack' }}</p>
          <div class="hero-tags">
            <span class="tag">Java</span>
            <span class="tag">Spring Boot</span>
            <span class="tag">Angular</span>
            <span class="tag">TypeScript</span>
          </div>
          <div class="hero-cta">
            <button class="btn-primary-neon" (click)="scrollToSection('projetos')">
              <i class="bi bi-folder2-open"></i> VER PROJETOS
            </button>
            <a [href]="getGithubUrl()" target="_blank" class="btn-outline-neon" aria-label="Perfil no GitHub">
              <i class="bi bi-github"></i> GITHUB
            </a>
          </div>
        </div>

        <div class="col-lg-5 d-flex justify-content-end animate-on-scroll fade-left">
          <div class="status-window">
            <div class="status-header">
              <div class="window-dots">
                <span class="dot red"></span>
                <span class="dot yellow"></span>
                <span class="dot green"></span>
              </div>
              <span>PLAYER_STATUS.exe</span>
            </div>
            <div class="status-body">
              <div class="stat-line">
                <span class="stat-key"><i class="bi bi-person-fill"></i> NOME</span>
                <span class="stat-val">{{ portfolioData?.nome }}</span>
              </div>
              <div class="stat-line">
                <span class="stat-key"><i class="bi bi-github"></i> USER</span>
                <span class="stat-val">&#64;{{ portfolioData?.githubUser }}</span>
              </div>
              <div class="stat-line">
                <span class="stat-key"><i class="bi bi-geo-alt-fill"></i> LOCAL</span>
                <span class="stat-val">{{ portfolioData?.location || 'Brasil' }}</span>
              </div>
              <div class="stat-line">
                <span class="stat-key"><i class="bi bi-folder-fill"></i> PROJETOS</span>
                <span class="stat-val highlight">{{ portfolioData?.projetos?.length || 0 }} QUESTS</span>
              </div>
              <div class="stat-line">
                <span class="stat-key"><i class="bi bi-circle-fill text-success"></i> STATUS</span>
                <span class="stat-val online">ONLINE</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="scroll-indicator" (click)="scrollToSection('sobre')">
      <i class="bi bi-chevron-double-down"></i>
    </div>
  </section>

  <!-- Sobre Section -->
  <section id="sobre" class="section-sobre">
    <div class="container">
      <div class="section-header animate-on-scroll fade-up">
        <span class="section-tag">// SOBRE MIM</span>
        <h2 class="section-title">QUEM SOU EU</h2>
        <div class="section-line"></div>
      </div>
      <div class="row align-items-center g-5">
        <div class="col-lg-5 animate-on-scroll fade-right">
          <div class="profile-card">
            <div class="profile-img-wrapper">
              <img src="/assets/perfil.jpg" alt="Foto de perfil de Mailon Augusto" class="profile-img" />
              <div class="profile-glow"></div>
            </div>
            <div class="profile-social">
              <a [href]="getGithubUrl()" target="_blank" class="social-btn" aria-label="GitHub">
                <i class="bi bi-github"></i>
              </a>
              <a [href]="portfolioData?.linkedinUrl || '#'" target="_blank" class="social-btn" aria-label="LinkedIn">
                <i class="bi bi-linkedin"></i>
              </a>
              <a [href]="'mailto:' + (portfolioData?.email || '')" class="social-btn" aria-label="Email">
                <i class="bi bi-envelope-fill"></i>
              </a>
            </div>
          </div>
        </div>
        <div class="col-lg-7 animate-on-scroll fade-left">
          <div class="about-content">
            <p class="about-text">
              Olá! Sou <strong>Mailon Augusto</strong>, um desenvolvedor Full Stack com foco em criar
              soluções robustas e escaláveis. Apaixonado por tecnologia, busco sempre aprender
              e aplicar as melhores práticas de desenvolvimento.
            </p>
            <p class="about-text">{{ portfolioData?.bio }}</p>
            <div class="about-stats">
              <div class="stat-box">
                <span class="stat-number">{{ portfolioData?.projetos?.length || 0 }}+</span>
                <span class="stat-label">Projetos</span>
              </div>
              <div class="stat-box">
                <span class="stat-number">3+</span>
                <span class="stat-label">Anos Exp.</span>
              </div>
              <div class="stat-box">
                <span class="stat-number">10+</span>
                <span class="stat-label">Tecnologias</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Skills Section -->
  <section id="skills" class="section-skills">
    <div class="container">
      <div class="section-header animate-on-scroll fade-up">
        <span class="section-tag">// HABILIDADES</span>
        <h2 class="section-title">SKILL TREE</h2>
        <div class="section-line"></div>
      </div>
      <div class="row g-4">
        <div class="col-md-6 animate-on-scroll fade-up"
             *ngFor="let skill of skills; let i = index"
             [style.animation-delay]="(i * 0.1) + 's'">
          <div class="skill-item">
            <div class="skill-header">
              <div class="skill-name">
                <i class="bi" [ngClass]="skill.icon"></i>
                {{ skill.name }}
              </div>
              <span class="skill-level">{{ skill.level }}%</span>
            </div>
            <div class="skill-bar">
              <div class="skill-progress" [style.width]="skill.level + '%'"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="tech-badges animate-on-scroll fade-up">
        <span class="tech-badge" *ngFor="let tech of ['Angular', 'Spring Boot', 'TypeScript', 'Java', 'MySQL', 'Docker', 'Git', 'REST API', 'JPA', 'Bootstrap']">
          {{ tech }}
        </span>
      </div>
    </div>
  </section>

  <!-- Projetos Section -->
  <section id="projetos" class="section-projetos">
    <div class="container">
      <div class="section-header animate-on-scroll fade-up">
        <span class="section-tag">// PROJETOS</span>
        <h2 class="section-title">QUEST LOG</h2>
        <div class="section-line"></div>
        <p class="section-subtitle">{{ portfolioData?.projetos?.length }} quests completadas</p>
      </div>
      <div class="row g-4">
        <div class="col-md-6 col-lg-4 animate-on-scroll fade-up"
             *ngFor="let projeto of portfolioData?.projetos; let i = index"
             [style.animation-delay]="(i * 0.1) + 's'">
          <div class="quest-card">
            <div class="quest-card-header">
              <div class="quest-icon">
                <i class="bi bi-code-square"></i>
              </div>
              <div class="quest-lang" [style.background-color]="getLangColor(projeto.language)" *ngIf="projeto.language">
                {{ projeto.language }}
              </div>
            </div>
            <div class="quest-card-body">
              <h3 class="quest-title">{{ projeto.name }}</h3>
              <p class="quest-desc">{{ projeto.description || 'Sem descrição disponível.' }}</p>
            </div>
            <div class="quest-card-footer">
              <div class="quest-stats">
                <span class="quest-stat" *ngIf="projeto.stargazers_count !== undefined">
                  <i class="bi bi-star-fill"></i> {{ projeto.stargazers_count }}
                </span>
                <span class="quest-stat" *ngIf="projeto.forks_count !== undefined">
                  <i class="bi bi-diagram-2-fill"></i> {{ projeto.forks_count }}
                </span>
              </div>
              <a [href]="projeto.html_url" target="_blank" class="btn-view" [attr.aria-label]="'Ver projeto ' + projeto.name">
                <i class="bi bi-box-arrow-up-right"></i> VER PROJETO
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="text-center mt-5 animate-on-scroll fade-up">
        <a [href]="getGithubUrl()" target="_blank" class="btn-outline-neon">
          <i class="bi bi-github"></i> VER TODOS NO GITHUB
        </a>
      </div>
    </div>
  </section>

  <!-- Contato Section -->
  <section id="contato" class="section-contato">
    <div class="container">
      <div class="section-header animate-on-scroll fade-up">
        <span class="section-tag">// CONTATO</span>
        <h2 class="section-title">INICIAR MISSÃO</h2>
        <div class="section-line"></div>
      </div>
      <div class="row justify-content-center">
        <div class="col-lg-8 animate-on-scroll fade-up">
          <div class="contact-card">
            <p class="contact-text">
              Tem um projeto em mente? Vamos conversar e transformar sua ideia em realidade!
            </p>
            <div class="contact-links">
              <a [href]="'mailto:' + (portfolioData?.email || 'mailon@email.com')" class="contact-link">
                <i class="bi bi-envelope-fill"></i>
                <span>{{ portfolioData?.email || 'mailon@email.com' }}</span>
              </a>
              <a [href]="getGithubUrl()" target="_blank" class="contact-link">
                <i class="bi bi-github"></i>
                <span>&#64;{{ portfolioData?.githubUser }}</span>
              </a>
              <a [href]="portfolioData?.linkedinUrl || '#'" target="_blank" class="contact-link" *ngIf="portfolioData?.linkedinUrl">
                <i class="bi bi-linkedin"></i>
                <span>LinkedIn</span>
              </a>
            </div>
            <button class="btn-primary-neon btn-lg-neon" (click)="abrirContato()">
              <i class="bi bi-whatsapp"></i> ENVIAR MENSAGEM
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="system-footer">
    <div class="container">
      <div class="footer-inner">
        <span class="footer-brand">SYSTEM.MAILON</span>
        <span class="footer-copy">© {{ currentYear }} Mailon Augusto. Todos os direitos reservados.</span>
        <div class="footer-social">
          <a [href]="getGithubUrl()" target="_blank" aria-label="GitHub"><i class="bi bi-github"></i></a>
          <a [href]="portfolioData?.linkedinUrl || '#'" target="_blank" aria-label="LinkedIn"><i class="bi bi-linkedin"></i></a>
        </div>
      </div>
    </div>
  </footer>

</div>
